<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.bookstore.mapper.CustomerMapper">

    <resultMap id="CustomerResult" type="com.bookstore.entity.Customer">
        <id column="customerID" property="customerID"/>
        <result column="firstName" property="firstName"/>
        <result column="lastName" property="lastName"/>
        <result column="email" property="email"/>
        <result column="password" property="password"/>
        <result column="age" property="age"/>
        <result column="nationality" property="nationality"/>
        <result column="language" property="language"/>
        <result column="religion" property="religion"/>
        <result column="profession" property="profession"/>
        <result column="userID" property="userID"/>
        <result column="bankID" property="bankID"/>
    </resultMap>

    <select id="findAll" resultMap="CustomerResult">
        SELECT customerID, firstName, lastName, email, password, age, nationality, language, religion, profession, userID, bankID
        FROM customers
        ORDER BY customerID DESC
    </select>

    <select id="count" resultType="long">
        SELECT COUNT(*) FROM customers
    </select>

    <select id="findByEmailAndPassword" resultMap="CustomerResult">
        SELECT customerID, firstName, lastName, email, password, age, nationality, language, religion, profession, userID, bankID
        FROM customers
        WHERE email = #{email} AND password = #{password}
        LIMIT 1
    </select>

    <insert id="insert" useGeneratedKeys="true" keyProperty="customerID">
        INSERT INTO customers (firstName, lastName, email, password, age, nationality, language, religion, profession, userID, bankID)
        VALUES (#{firstName}, #{lastName}, #{email}, #{password}, #{age}, #{nationality}, #{language}, #{religion}, #{profession}, #{userID}, #{bankID})
    </insert>
</mapper>
